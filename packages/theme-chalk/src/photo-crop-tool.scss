@use "mixins/mixins" as *;

@include b(photo-crop-tool) {
  @include e(img-box) {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100%;
    background-color: #fafafa;
    display: flex;
    align-items: center;
    justify-content: center;

    @include e(image) {
      max-width: 100%;
      max-height: 100%;
      vertical-align: middle;
      object-fit: contain;
      // 禁止过拽
      -webkit-user-drag: none;
      // 禁止选中
      -webkit-user-select: none;
    }

    @include e(crop-tool-box) {
      position: absolute;
      width: calc(getCssVar("photo-crop-tool", "width") * 1px);
      height: calc(getCssVar("photo-crop-tool", "height") * 1px);
      aspect-ratio: getCssVar("photo-crop-tool", "aspect-ratio");
      cursor: move;
      border: 1px dashed #fff;
      overflow: hidden;
      box-shadow: 0 0 0 9999px rgb(0 0 0 / 40%); /* 扩展阴影以覆盖周围区域 */
      > div {
        position: absolute;
        width: 30%;
        aspect-ratio: 1 / 1;
        background-color: rgba($color: #020202, $alpha: 0.01);
        border-radius: 50%;
        z-index: 3;
        transition: all 0.3s;
        &:hover,
        &:active {
          background-color: rgba($color: #020202, $alpha: 0.5);
        }

        @include e(top-left) {
          top: 0;
          left: 0;
          transform: translate3d(-50%, -50%, 0);
          cursor: nwse-resize;
        }

        @include e(top-right) {
          top: 0;
          right: 0;
          transform: translate3d(50%, -50%, 0);
          cursor: nesw-resize;
        }

        @include e(bottom-right) {
          right: 0;
          bottom: 0;
          transform: translate3d(50%, 50%, 0);
          cursor: nwse-resize;
        }

        @include e(bottom-left) {
          bottom: 0;
          left: 0;
          transform: translate3d(-50%, 50%, 0);
          cursor: nesw-resize;
        }
      }
    }
  }
}
